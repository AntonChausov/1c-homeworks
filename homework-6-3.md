# Задание к занятию "Итоги и группировки"

## Задача "Реестр документов Поступление"

### Описание задачи

Создать внешнюю обработку РеестрДокументовПоступление. Обработка формирует и выводит на экран Текстовый документ с перечнем документов Поступление за указанный период. Возможные итоги регулируются настройками обработки.

### Требования к результату

Прикрепить .epf файл внешней обработки для формирования реестра документов Поступление.

### Процесс выполнения

1. Использовать файл *.cf конфигурацию из прошлого задания. 
2. Создать общий макет РеестрДокументовПоступление. Тип макета - текстовый документ. В макете добавить области:
    * Для вывода периода формирования реестра;
    * Для вывода детальных записей по документам Поступление. Выводить данные по ссылке документа, контрагенту и сумме документа;
    * Для возможности отображения итогов по контрагенту и общих итогов. Итоги выводить после детальных записей. Если в обработке указана возможность выводить итоги по контрагенту,
      то в детальных записях по документам должен контрагент отсутствовать. Общие итоги выводятся в конце отчета       
3. Создать внешнюю обработку РеестрДокументвоПоступление, в которой:
    * Добавить реквизиты для указания периода формирования реестра и реквизиты формы ИтогиПоКонтрагенту и ОбщиеИтоги типа булево для указания возможности отображения итогов по 
      контрагентам и общих итогов. Добавить реквизит ДетальныеЗаписи. Разместить реквизиты на форме в виде флажков. Добавить числовые реквизиты СуммаС и СуммаПо. Разместить их на 
      форме.  
      Значения в этих реквизитах ограничиывает выборку по суммам для контрагентов;
    * Добавить команду Реестр и соответственно кнопку разместить на форму;
    * Для команды перекрыть действие в котором реализовать:
      - запрос, который формирует данные для вывода в макет. При этом учитывать, что если снят флажок Детальные записи, формировать запрос через группировку иначе через итоги;
      - обработку данных и вывод в макет;
      - Обработывать корректно следующие ситуации. Начальная дата и Конечная дата могут быть не заполнены. В этом случае корректно формировать условие запроса. Если не выбраны  
        значения для логических реквизитов то не формировать запрос с соответствующим сообщением;
    * Создать документы Поступление в системе различными датами и протестировать корректный вывод макета на экран;
